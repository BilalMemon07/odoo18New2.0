<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>
        <!-- Wizard Form view -->
        <record id="view_reconcile_payment_form" model="ir.ui.view">
            <field name="name">reconcile.payment.form</field>
            <field name="model">reconcile.payment</field>
            <field name="arch" type="xml">
                <form string="Reconcile Payment">
                    <group>
                        <group>
                            <field name="payment_type" invisible="1"/>
                            <field name="partner_id" string="Customer" force_save="True" invisible="payment_type == 'outbound'"/>
                            <field name="partner_id" string="Vendor" force_save="True" invisible="payment_type == 'inbound'"/>
                        </group>
                    </group>
                    
                    <div id="allocation_payment">
                        <br/>
                        <h2><span>Payments</span></h2>
		        	    <field name="allocation_payment_ids">
		        	        <list create="false" delete="false" editable="bottom">
		        	            <field name="state" column_invisible="1"/>
		        	            <field name="select_to_pay"/><!-- widget="boolean_toggle"-->
		        	            <field name="name"/>
		        	            <field name="date" optional="show"/>
		        	            <field name="ref" optional="show"/>
		        	            <field name="move_id" optional="show"/>
		        	            <field name="amount"/>
		        	            <field name="amount_due" sum="Total"/>
		        	            <field name="account_payment_id" column_invisible="1"/>
		        	            <field name="currency_id" column_invisible="1"/>
		        	        </list>
		        	    </field>
		        	</div>
                    <div id="allocation_move">
                        <h2>
                            <!--span>Invoice/Bill Details</span-->
                            <span invisible="payment_type == 'outbound'">To be reconcile with below Invoices</span>
                            <span invisible="payment_type == 'inbound'">To be reconcile with below Bills</span>
                        </h2>
			            <field name="allocation_move_ids">
			                <list create="false" editable="bottom">
			                    <field name="select_to_pay"/><!-- widget="boolean_toggle"-->
			                    <field name="name"/>
			                    <field name="account_move_id" column_invisible="1"/>
			                    <field name="ref" optional="show"/>
			                    <field name="company_id" column_invisible="1"/>
			                    <field name="due_date" optional="show"/>
			                    <field name="amount_untaxed" optional="hide"/>
			                    <field name="amount_total" sum="Total"/>
			                    <field name="amount_residual" sum="Total"/>
			                    <field name="paid_amount"/>
			                    <field name="state" column_invisible="1"/>
			                </list>
			            </field>
			        </div>
			        <group class="oe_right">
			            <field name="to_be_paid_amount"/>
			        </group>
	                <footer>
                        <button string='Reconcile Payment' name="reconcile_payment" type="object" class="btn-primary"/>
                        <button string="Cancel" class="btn-default" special="cancel"/>
	                </footer>
               </form>
            </field>
        </record>
        
        <record id="action_reconcile_payment" model="ir.actions.act_window">
            <field name="name">Reconcile Payment</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">reconcile.payment</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
            <field name="groups_id" eval="[(4, ref('reconcile_outstanding_payment_omax.group_reconcile_payment'))]"/>
            <field name="binding_model_id" ref="account.model_account_payment"/>
        </record>
    </data>
</odoo>
